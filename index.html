<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Corrida da Salvação - Novo</title>
<style>
  body {
    margin: 0;
    background: linear-gradient(to top, #87ceeb, #f0f8ff);
    overflow: hidden;
    font-family: Arial, sans-serif;
  }
  canvas {
    display: block;
    margin: 0 auto;
    background: #a0d8f7;
    border: 2px solid #333;
  }
  #gameover {
    position: fixed;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3em;
    color: red;
    display: none;
  }
</style>
</head>
<body>
<canvas id="game" width="600" height="400"></canvas>
<div id="gameover">Fim de Jogo!</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const gravity = 0.8;
const groundLevel = 330;

let gameOver = false;

// Personagem
const player = {
  x: 50,
  y: groundLevel,
  w: 50,
  h: 70,
  velocityY: 0,
  isJumping: false,
  speedX: 5
};

const keys = {
  left: false,
  right: false
};

// Imagens
const playerImg = new Image();
playerImg.src = "photo-output.png"; // aqui coloca o link/caminho da sua imagem no GitHub

const knifeImg = new Image();
knifeImg.src = "https://i.ibb.co/2SZDcFz/knife.png"; // Exemplo imagem faca

const planeImg = new Image();
planeImg.src = "https://i.ibb.co/HCZ1M2H/plane.png"; // Exemplo imagem avião

// Obstáculos
let obstacles = [];

function createObstacle() {
  const types = [
    {img: knifeImg, w: 40, h: 20},
    {img: planeImg, w: 60, h: 30}
  ];
  const type = types[Math.floor(Math.random() * types.length)];
  const obstacle = {
    x: canvas.width + 50,
    y: groundLevel + 50 - type.h, // perto do chão
    w: type.w,
    h: type.h,
    img: type.img,
    speed: 6 + Math.random() * 3
  };
  obstacles.push(obstacle);
}

// Movimento do player no teclado
document.addEventListener("keydown", (e) => {
  if (e.key === "ArrowLeft") keys.left = true;
  if (e.key === "ArrowRight") keys.right = true;
});

document.addEventListener("keyup", (e) => {
  if (e.key === "ArrowLeft") keys.left = false;
  if (e.key === "ArrowRight") keys.right = false;
});

// Pulo no toque (para celular)
canvas.addEventListener("touchstart", () => {
  if (!player.isJumping) {
    player.velocityY = -15;
    player.isJumping = true;
  }
});

// Atualiza a posição do player
function updatePlayer() {
  // Movimentação horizontal
  if (keys.left) {
    player.x -= player.speedX;
    if (player.x < 0) player.x = 0;
  }
  if (keys.right) {
    player.x += player.speedX;
    if (player.x + player.w > canvas.width) player.x = canvas.width - player.w;
  }

  // Gravidade e pulo
  player.velocityY += gravity;
  player.y += player.velocityY;

  if (player.y > groundLevel) {
    player.y = groundLevel;
    player.isJumping = false;
    player.velocityY = 0;
  }
}

// Atualiza obstáculos
function updateObstacles() {
  for (let i = obstacles.length - 1; i >= 0; i--) {
    const ob = obstacles[i];
    ob.x -= ob.speed;

    // Remove obstáculos que saíram da tela
    if (ob.x + ob.w < 0) {
      obstacles.splice(i, 1);
    }
  }
}

// Detecta colisão simples
function detectCollision(rect1, rect2) {
  return (
    rect1.x < rect2.x + rect2.w &&
    rect1.x + rect1.w > rect2.x &&
    rect1.y < rect2.y + rect2.h &&
    rect1.y + rect1.h > rect2.y
  );
}

// Checa colisões com o jogador
function checkCollisions() {
  for (const ob of obstacles) {
    if (detectCollision(player, ob)) {
      gameOver = true;
      document.getElementById("gameover").style.display = "block";
    }
  }
}

// Desenha o personagem
function drawPlayer() {
  ctx.drawImage(playerImg, player.x, player.y, player.w, player.h);
}

// Desenha obstáculos
function drawObstacles() {
  obstacles.forEach(ob => {
    ctx.drawImage(ob.img, ob.x, ob.y, ob.w, ob.h);
  });
}

// Desenha o chão
function drawGround() {
  ctx.fillStyle = "#654321";
  ctx.fillRect(0, groundLevel + player.h, canvas.width, canvas.height - groundLevel - player.h);
}

// Loop principal
function gameLoop() {
  if (gameOver) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawGround();

  updatePlayer();
  drawPlayer();

  updateObstacles();
  drawObstacles();

  checkCollisions();

  requestAnimationFrame(gameLoop);
}

// Começa o jogo e cria obstáculos periódicos
playerImg.onload = () => {
  gameLoop();
  setInterval(() => {
    if (!gameOver) createObstacle();
  }, 1500);
};
</script>
</body>
</html>