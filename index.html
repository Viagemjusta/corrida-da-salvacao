<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Esquiva Colorida</title>
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #111; overflow: hidden; font-family: Arial, sans-serif; }
    canvas { display: block; margin: 0 auto; background: #111; }
    #score { position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
        color: white; font-size: 24px; font-weight: bold; }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let player = { x: canvas.width/2, y: canvas.height-80, width: 50, height: 50, color: 'cyan' };
let obstacles = [];
let score = 0;
let gameOver = false;

// Gerar obstáculos aleatórios
function spawnObstacle() {
    let width = Math.random()*50 + 30;
    obstacles.push({
        x: Math.random()*(canvas.width - width),
        y: -50,
        width: width,
        height: 20,
        color: `hsl(${Math.random()*360}, 100%, 50%)`,
        speed: Math.random()*3 + 2
    });
}

// Controle do jogador
let keys = {};
window.addEventListener('keydown', e => keys[e.key] = true);
window.addEventListener('keyup', e => keys[e.key] = false);

function update() {
    if (gameOver) return;

    // Movimentar jogador
    if (keys['ArrowLeft'] && player.x > 0) player.x -= 8;
    if (keys['ArrowRight'] && player.x + player.width < canvas.width) player.x += 8;

    // Criar obstáculos
    if (Math.random() < 0.02) spawnObstacle();

    // Atualizar obstáculos
    for (let i = obstacles.length-1; i>=0; i--) {
        let ob = obstacles[i];
        ob.y += ob.speed;

        // Colisão
        if (player.x < ob.x + ob.width && player.x + player.width > ob.x &&
            player.y < ob.y + ob.height && player.y + player.height > ob.y) {
            gameOver = true;
        }

        // Remover obstáculos que saem da tela e pontuar
        if (ob.y > canvas.height) {
            obstacles.splice(i,1);
            score++;
            document.getElementById('score').innerText = "Score: " + score;
        }
    }
}

// Desenhar tudo
function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Jogador
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.width, player.height);

    // Obstáculos
    obstacles.forEach(ob => {
        ctx.fillStyle = ob.color;
        ctx.fillRect(ob.x, ob.y, ob.width, ob.height);
    });

    // Partículas no fundo
    for(let i=0;i<5;i++){
        ctx.fillStyle = `rgba(255,255,255,${Math.random()})`;
        ctx.fillRect(Math.random()*canvas.width, Math.random()*canvas.height, 2,2);
    }

    if(gameOver){
        ctx.fillStyle = 'red';
        ctx.font = '80px Arial';
        ctx.fillText('GAME OVER', canvas.width/2-250, canvas.height/2);
    }
}

// Loop principal
function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>