<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Meteoros Insanos</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        margin: 0;
        background: radial-gradient(#000010, #000000);
        overflow: hidden;
        touch-action: none;
    }

    canvas {
        position: fixed;
        top: 0;
        left: 0;
    }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resize();
window.onresize = resize;

let meteors = [];
let explosions = [];

// ðŸ”¥ textura interna do meteoro â€” faz parecer rocha de fogo
function drawMeteorTexture(size) {
    const off = document.createElement("canvas");
    off.width = size * 2;
    off.height = size * 2;
    const octx = off.getContext("2d");

    const grad = octx.createRadialGradient(size, size, size * 0.2, size, size, size);
    grad.addColorStop(0, "#ffddaa");
    grad.addColorStop(0.4, "#cc6622");
    grad.addColorStop(1, "#331100");

    octx.fillStyle = grad;
    octx.beginPath();
    octx.arc(size, size, size, 0, Math.PI * 2);
    octx.fill();

    return off;
}

function spawnMeteor() {
    const size = 30 + Math.random() * 40;
    meteors.push({
        x: Math.random() * canvas.width,
        y: -80,
        size,
        speed: 2 + Math.random() * 4,
        angle: Math.random() * 0.3 - 0.15,
        rot: Math.random() * Math.PI,
        rotSpeed: Math.random() * 0.1 - 0.05,
        texture: drawMeteorTexture(size)
    });
}

setInterval(spawnMeteor, 600);

// ðŸ’¥ explosÃ£o insana
function explode(x, y) {
    for (let i = 0; i < 40; i++) {
        explosions.push({
            x, y,
            dx: (Math.random() - 0.5) * 10,
            dy: (Math.random() - 0.5) * 10,
            size: 4 + Math.random() * 6,
            alpha: 1
        });
    }

    if (navigator.vibrate) navigator.vibrate(120);
}

canvas.addEventListener("touchstart", e => {
    const t = e.touches[0];
    checkHit(t.clientX, t.clientY);
});
canvas.addEventListener("mousedown", e => {
    checkHit(e.clientX, e.clientY);
});

function checkHit(x, y) {
    for (let i = meteors.length - 1; i >= 0; i--) {
        const m = meteors[i];
        const dx = x - m.x;
        const dy = y - m.y;
        if (Math.sqrt(dx*dx + dy*dy) < m.size) {
            explode(m.x, m.y);
            meteors.splice(i, 1);
            break;
        }
    }
}

// ðŸ”¥ Rastro de fogo realista
function drawFireTail(m) {
    const tailLen = m.size * 3;

    const grad = ctx.createLinearGradient(
        m.x, m.y,
        m.x - m.angle * tailLen,
        m.y - tailLen
    );

    grad.addColorStop(0, "rgba(255,150,50,0.8)");
    grad.addColorStop(0.4, "rgba(255,80,10,0.4)");
    grad.addColorStop(1, "rgba(0,0,0,0)");

    ctx.fillStyle = grad;

    ctx.beginPath();
    ctx.moveTo(m.x, m.y);
    ctx.lineTo(m.x - m.angle * tailLen + m.size, m.y - tailLen);
    ctx.lineTo(m.x - m.angle * tailLen - m.size, m.y - tailLen);
    ctx.closePath();
    ctx.fill();
}

// meteoro 3D fake + textura
function drawMeteor(m) {
    drawFireTail(m);

    ctx.save();
    ctx.translate(m.x, m.y);
    ctx.rotate(m.rot);

    ctx.drawImage(
        m.texture,
        -m.size,
        -m.size,
        m.size * 2,
        m.size * 2
    );

    ctx.restore();
}

function drawExplosion(e) {
    ctx.globalAlpha = e.alpha;
    ctx.fillStyle = "orange";
    ctx.beginPath();
    ctx.arc(e.x, e.y, e.size, 0, Math.PI * 2);
    ctx.fill();
    ctx.globalAlpha = 1;
}

function loop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (let m of meteors) {
        m.y += m.speed;
        m.x += m.angle * 4;
        m.rot += m.rotSpeed;
        drawMeteor(m);
    }

    meteors = meteors.filter(m => m.y < canvas.height + 100);

    for (let e of explosions) {
        e.x += e.dx;
        e.y += e.dy;
        e.alpha -= 0.03;
        drawExplosion(e);
    }

    explosions = explosions.filter(e => e.alpha > 0);

    requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>