<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>O Guardião da Verdade</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: linear-gradient(#0a0a0a, #1a1a1a); overflow: hidden; color: white; font-family: sans-serif; }
    canvas { display: block; margin: auto; background: #222; border: 2px solid #fff; }

    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <canvas id="game" width="400" height="600"></canvas>
  <div id="score">Pontos: 0</div>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    let player = { x: 20, y: 300, w: 40, h: 40 };
    let bullets = [];
    let enemies = [];
    let score = 0;

    function drawPlayer() {
      ctx.fillStyle = "yellow";
      ctx.fillRect(player.x, player.y, player.w, player.h);
      ctx.fillStyle = "black";
      ctx.fillText("Bíblia", player.x + 2, player.y + 25);
    }

    function drawBullets() {
      ctx.fillStyle = "#00f";
      bullets.forEach((b, i) => {
        b.x += 5;
        ctx.fillRect(b.x, b.y, 10, 5);
        if (b.x > canvas.width) bullets.splice(i, 1);
      });
    }

    function drawEnemies() {
      ctx.fillStyle = "red";
      enemies.forEach((e, i) => {
        e.x -= 2;
        ctx.fillRect(e.x, e.y, e.w, e.h);

        // colisão com player
        if (
          e.x < player.x + player.w &&
          e.x + e.w > player.x &&
          e.y < player.y + player.h &&
          e.y + e.h > player.y
        ) {
          alert("Você foi atingido por uma mentira!\nFim de jogo.");
          location.reload();
        }

        // colisão com bullets
        bullets.forEach((b, j) => {
          if (
            b.x < e.x + e.w &&
            b.x + 10 > e.x &&
            b.y < e.y + e.h &&
            b.y + 5 > e.y
          ) {
            enemies.splice(i, 1);
            bullets.splice(j, 1);
            score += 1;
            document.getElementById("score").textContent = `Pontos: ${score}`;
          }
        });

        if (e.x < 0) enemies.splice(i, 1);
      });
    }

    function spawnEnemy() {
      const y = Math.random() * (canvas.height - 40);
      enemies.push({ x: canvas.width, y: y, w: 40, h: 40 });
    }

    setInterval(spawnEnemy, 1500);

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawPlayer();
      drawBullets();
      drawEnemies();
      requestAnimationFrame(gameLoop);
    }

    canvas.addEventListener("touchstart", () => {
      bullets.push({ x: player.x + player.w, y: player.y + 15 });
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowUp" && player.y > 0) player.y -= 20;
      if (e.key === "ArrowDown" && player.y + player.h < canvas.height)
        player.y += 20;
    });

    gameLoop();
  </script>
</body>
</html>